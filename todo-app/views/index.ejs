<!DOCTYPE html>
<html lang="en">
<head>
  <title>Todo App</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/styles.css" />
</head>
<body class="bg-gray-50 min-h-screen">
  <%- include("header") %>

  <main class="container mx-auto px-4 py-8 max-w-4xl">
    <!-- Removed: <h1 class="text-3xl font-bold text-gray-600 mb-8">My Todo-list</h1> -->

    <!-- Add Todo Form -->
    <form class="flex flex-col sm:flex-row gap-4 mb-10" action="/todos" method="POST">
      <input type="hidden" name="_csrf" value="<%= csrfToken %>">
      <input 
        class="flex-grow px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
        type="text" 
        name="title" 
        placeholder="Enter todo title" 
        required
      >
      <input 
        class="px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
        type="date" 
        name="dueDate" 
        required
      >
      <button 
        class="px-6 py-2 bg-green-500 text-white font-medium rounded-lg hover:bg-green-600 transition-colors"
        type="submit"
      >
        Add Todo
      </button>
    </form>

    <!-- Overdue Section -->
    <section class="mb-10">
      <h2 class="text-xl font-semibold text-gray-700 mb-4">Overdue (<span id="count-overdue"><%= overdue.length %></span>)</h2>
      <div class="overflow-hidden rounded-lg shadow-md">
        <table class="min-w-full divide-y divide-gray-200">
          <thead class="bg-gray-50">
            <tr>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">ID</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Title</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Due Date</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Status</th>
            </tr>
          </thead>
          <tbody class="bg-white divide-y divide-gray-200">
            <% overdue.forEach(todo => { %>
            <tr class="hover:bg-gray-50 transition-colors">
              <td class="px-6 py-4 text-sm font-medium text-gray-900"><%= todo.id %></td>
              <td class="px-6 py-4 text-sm text-gray-900"><%= todo.title %></td>
              <td class="px-6 py-4 text-sm text-gray-900"><%= todo.dueDate %></td>
              <td class="px-6 py-4 text-sm text-gray-900">
                <input type="checkbox" class="h-4 w-4 text-green-500 border-gray-300 rounded" <%= todo.completed ? "checked" : "" %> >
              </td>
            </tr>
            <% }) %>
          </tbody>
        </table>
      </div>
    </section>

    <!-- Due Today Section -->
    <section class="mb-10">
      <h2 class="text-xl font-semibold text-gray-700 mb-4">Due Today (<span id="count-due-today"><%= dueToday.length %></span>)</h2>
      <div class="overflow-hidden rounded-lg shadow-md">
        <table class="min-w-full divide-y divide-gray-200">
          <thead class="bg-gray-50">
            <tr>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">ID</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Title</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Due Date</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Status</th>
            </tr>
          </thead>
          <tbody class="bg-white divide-y divide-gray-200">
            <% dueToday.forEach(todo => { %>
            <tr class="hover:bg-gray-50 transition-colors">
              <td class="px-6 py-4 text-sm font-medium text-gray-900"><%= todo.id %></td>
              <td class="px-6 py-4 text-sm text-gray-900"><%= todo.title %></td>
              <td class="px-6 py-4 text-sm text-gray-900"><%= todo.dueDate %></td>
              <td class="px-6 py-4 text-sm text-gray-900">
                <input type="checkbox" class="h-4 w-4 text-green-500 border-gray-300 rounded" <%= todo.completed ? "checked" : "" %> >
              </td>
            </tr>
            <% }) %>
          </tbody>
        </table>
      </div>
    </section>

    <!-- Due Later Section -->
    <section class="mb-10">
      <h2 class="text-xl font-semibold text-gray-700 mb-4">Due Later (<span id="count-due-later"><%= dueLater.length %></span>)</h2>
      <div class="overflow-hidden rounded-lg shadow-md">
        <table class="min-w-full divide-y divide-gray-200">
          <thead class="bg-gray-50">
            <tr>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">ID</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Title</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Due Date</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Status</th>
            </tr>
          </thead>
          <tbody class="bg-white divide-y divide-gray-200">
            <% dueLater.forEach(todo => { %>
            <tr class="hover:bg-gray-50 transition-colors">
              <td class="px-6 py-4 text-sm font-medium text-gray-900"><%= todo.id %></td>
              <td class="px-6 py-4 text-sm text-gray-900"><%= todo.title %></td>
              <td class="px-6 py-4 text-sm text-gray-900"><%= todo.dueDate %></td>
              <td class="px-6 py-4 text-sm text-gray-900">
                <input type="checkbox" class="h-4 w-4 text-green-500 border-gray-300 rounded" <%= todo.completed ? "checked" : "" %> >
              </td>
            </tr>
            <% }) %>
          </tbody>
        </table>
      </div>
    </section>

    <!-- Completed Section -->
    <section class="mb-10">
      <h2 class="text-xl font-semibold text-gray-700 mb-4">Completed (<span id="count-completed"><%= completed.length %></span>)</h2>
      <div class="overflow-hidden rounded-lg shadow-md">
        <table class="min-w-full divide-y divide-gray-200">
          <thead class="bg-gray-50">
            <tr>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">ID</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Title</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Due Date</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Status</th>
            </tr>
          </thead>
          <tbody class="bg-white divide-y divide-gray-200">
            <% completed.forEach(todo => { %>
            <tr class="hover:bg-gray-50 transition-colors">
              <td class="px-6 py-4 text-sm font-medium text-gray-900"><%= todo.id %></td>
              <td class="px-6 py-4 text-sm text-gray-900"><%= todo.title %></td>
              <td class="px-6 py-4 text-sm text-gray-900"><%= todo.dueDate %></td>
              <td class="px-6 py-4 text-sm text-gray-900">
                <input type="checkbox" class="h-4 w-4 text-green-500 border-gray-300 rounded" checked>
              </td>
            </tr>
            <% }) %>
          </tbody>
        </table>
      </div>
    </section>
  </main>

  <%- include("footer") %>
</body>
</html>
