<!DOCTYPE html>
<html lang="en">
<head>
  <title>Todo App</title>
  <link rel="stylesheet" href="/css/styles.css" />
</head>
<body>
  <%- include("header") %>

  <main class="container">
    <h1>My Todo-list</h1>

    <form action="/todos" method="POST">
      <input type="hidden" name="_csrf" value="<%= csrfToken %>">
      <input type="text" name="title" placeholder="Enter todo title" required />
      <input type="date" name="dueDate" required />
      <button type="submit">Add Todo</button>
    </form>

    <!-- Overdue Section -->
    <h2>Overdue (<span id="count-overdue"><%= overdue.length %></span>)</h2>
    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>Title</th>
          <th>Due Date</th>
          <th>Completed</th>
        </tr>
      </thead>
      <tbody>
        <% overdue.forEach(todo => { %>
          <tr class="Todo-Item">
            <td><%= todo.id %></td>
            <td><%= todo.title %></td>
            <td><%= todo.dueDate %></td>
            <td><input type="checkbox" <%= todo.completed ? "checked" : "" %> /></td>
          </tr>
        <% }) %>
      </tbody>
    </table>

    <!-- Due Today Section -->
    <h2>Due Today (<span id="count-due-today"><%= dueToday.length %></span>)</h2>
    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>Title</th>
          <th>Due Date</th>
          <th>Completed</th>
        </tr>
      </thead>
      <tbody>
        <% dueToday.forEach(todo => { %>
          <tr class="Todo-Item">
            <td><%= todo.id %></td>
            <td><%= todo.title %></td>
            <td><%= todo.dueDate %></td>
            <td><input type="checkbox" <%= todo.completed ? "checked" : "" %> /></td>
          </tr>
        <% }) %>
      </tbody>
    </table>

    <!-- Due Later Section -->
    <h2>Due Later (<span id="count-due-later"><%= dueLater.length %></span>)</h2>
    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>Title</th>
          <th>Due Date</th>
          <th>Completed</th>
        </tr>
      </thead>
      <tbody>
        <% dueLater.forEach(todo => { %>
          <tr class="Todo-Item">
            <td><%= todo.id %></td>
            <td><%= todo.title %></td>
            <td><%= todo.dueDate %></td>
            <td><input type="checkbox" <%= todo.completed ? "checked" : "" %> /></td>
          </tr>
        <% }) %>
      </tbody>
    </table>

    <!-- Completed Section -->
    <h2>Completed (<span id="count-completed"><%= completed.length %></span>)</h2>
    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>Title</th>
          <th>Due Date</th>
          <th>Completed</th>
        </tr>
      </thead>
      <tbody>
        <% completed.forEach(todo => { %>
          <tr class="Todo-Item">
            <td><%= todo.id %></td>
            <td><%= todo.title %></td>
            <td><%= todo.dueDate %></td>
            <td><input type="checkbox" checked /></td>
          </tr>
        <% }) %>
      </tbody>
    </table>
  </main>

  <%- include("footer") %>
</body>
</html>
